/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/feedbackplus@1.6.0/src/feedbackplus.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/*! FeedbackPlus v1.6.0 | (c) ColonelParrot and other contributors | MIT License */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.FeedbackPlus=t()}(this,(function(){"use strict";class e{constructor(){const e=document.createElement("div");e.classList.add("feedbackplus","feedbackplus-modal"),e.innerHTML='<div class="feedbackplus feedbackplus-header"><h2 style="margin:5px 20px">Edytuj zrzut ekranu</h2><svg class="feedbackplus feedbackplus-close"fill=#000000 height=24px viewBox="0 0 24 24"width=24px xmlns=http://www.w3.org/2000/svg style=margin-right:10px><path d="M0 0h24v24H0V0z"fill=none /><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg></div><div class="feedbackplus feedbackplus-canvas-container"><canvas class="feedbackplus feedbackplus-canvas"></canvas></div><div class="feedbackplus feedbackplus-footer"><div class="feedbackplus feedbackplus-tools"><div class="feedbackplus feedbackplus-button feedbackplus-tool feedbackplus-highlight-tool"><svg class="feedbackplus feedbackplus-tool-icon"fill=#0b57d0 height=20px viewBox="0 0 24 24"width=20px xmlns=http://www.w3.org/2000/svg enable-background="new 0 0 24 24"><g><rect fill=none height=24 width=24 /><path d="M17,5h-2V3h2V5z M15,15v6l2.29-2.29L19.59,21L21,19.59l-2.29-2.29L21,15H15z M19,9h2V7h-2V9z M19,13h2v-2h-2V13z M11,21h2 v-2h-2V21z M7,5h2V3H7V5z M3,17h2v-2H3V17z M5,21v-2H3C3,20.1,3.9,21,5,21z M19,3v2h2C21,3.9,20.1,3,19,3z M11,5h2V3h-2V5z M3,9h2 V7H3V9z M7,21h2v-2H7V21z M3,13h2v-2H3V13z M3,5h2V3C3.9,3,3,3.9,3,5z"/></g></svg> Pod≈õwietl</div><div class="feedbackplus feedbackplus-button feedbackplus-tool feedbackplus-hide-tool"style="margin-left:10px;margin-right:10px"><svg class="feedbackplus feedbackplus-tool-icon"fill=#0b57d0 height=20px viewBox="0 0 24 24"width=20px xmlns=http://www.w3.org/2000/svg enable-background="new 0 0 24 24"><g><rect fill=none height=24 width=24 /></g><g><g><path d=M19,5v11.17l2,2V5c0-1.1-0.9-2-2-2H5.83l2,2H19z /><path d="M2.81,2.81L1.39,4.22L3,5.83V19c0,1.1,0.9,2,2,2h13.17l1.61,1.61l1.41-1.41L2.81,2.81z M5,19V7.83l7.07,7.07L11.25,16 L9,13l-3,4h8.17l2,2H5z"/></g></g></svg> Ukryj</div></div><div class="feedbackplus feedbackplus-finish-actions"><div class="feedbackplus feedbackplus-button feedbackplus-cancel"style=margin-right:10px>Anuluj</div><div class="feedbackplus feedbackplus-button feedbackplus-complete"style=border-color:#0b57d0;background-color:#0b57d0;color:#fff>Zapisz</div></div></div>';const t=document.createElement("div");t.classList.add("feedbackplus","feedbackplus-backdrop"),this.modal=e,this.backdrop=t}static isRootSupported(){return!!navigator?.mediaDevices?.getDisplayMedia&&!!window.HTMLCanvasElement}static isSupported(){const t=e.isRootSupported();return t||!!window.html2canvas}async capture(t=500){if(e.isSupported())return e.isRootSupported()?new Promise(((s,l)=>{navigator.mediaDevices.getDisplayMedia({video:!0,preferCurrentTab:!0}).then((l=>{const c=document.createElement("video");setTimeout((()=>{c.srcObject=l,c.onloadedmetadata=()=>{c.play(),c.pause();const t=document.createElement("canvas");t.width=c.videoWidth,t.height=c.videoHeight,t.getContext("2d").drawImage(c,0,0),l.getVideoTracks().forEach((e=>e.stop())),e.canvasToBitmap(t).then((e=>s(e)))}}),t)})).catch((e=>l(e)))})):new Promise(((s,l)=>{setTimeout((function(){html2canvas(document.body,{logging:!1,windowWidth:window.screen.width+"px"}).then((function(t){e.canvasToBitmap(t).then((e=>{s(e)}))})).catch((e=>l(e)))}),t)}))}showEditDialog(e,t,s,l){(l=l||{}).allowHighlight=l.allowHighlight??!0,l.allowHide=l.allowHide??!0;const{allowHighlight:c,allowHide:o}=l;function a(){g.removeEventListener("mousedown",y),g.removeEventListener("mousemove",L),document.body.removeEventListener("mouseup",x),g.removeEventListener("mousedown",E,!0),H.removeEventListener("click",M),z.removeEventListener("click",V),S.removeEventListener("click",V),n.forEach((e=>{e.removeEventListener("click",p)})),document.body.removeEventListener("keypress",C)}const{modal:d,backdrop:i}=this,n=d.querySelectorAll(".feedbackplus.feedbackplus-tool"),p=function(e){n.forEach((e=>e.classList.remove("feedbackplus-active"))),e.target.closest(".feedbackplus.feedbackplus-tool").classList.add("feedbackplus-active")};n.forEach((e=>{e.addEventListener("click",p)}));const r=d.querySelector(".feedbackplus.feedbackplus-canvas");r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0);const u=document.createElement("canvas");u.width=e.width,u.height=e.height,u.getContext("2d").drawImage(e,0,0);const h=d.querySelector(".feedbackplus.feedbackplus-highlight-tool"),f=d.querySelector(".feedbackplus.feedbackplus-hide-tool"),v=document.createElement("div");v.classList.add("feedbackplus","feedbackplus-highlight","feedbackplus-edit"),v.innerHTML='<svg fill=#000000 height=20px class="feedbackplus feedbackplus-tool-close"style="display:none"viewBox="0 0 24 24"width=20px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z"fill=none></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>';const b=document.createElement("div");b.classList.add("feedbackplus","feedbackplus-hide","feedbackplus-edit"),b.innerHTML='<svg fill=#000000 height=20px class="feedbackplus feedbackplus-tool-close"style="display:none"viewBox="0 0 24 24"width=20px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z"fill=none></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>';let k=null;const g=d.querySelector(".feedbackplus.feedbackplus-canvas-container");let m,w;const y=function(e){k&&x(e);let t=h.classList.contains("feedbackplus-active");if(c&&t)k=v.cloneNode(!0);else{if(!o||!f.classList.contains("feedbackplus-active"))return;k=b.cloneNode(!0)}const s=e.pageX,l=e.pageY,a=g.getBoundingClientRect(),[d,i]=[s-a.left+g.scrollLeft-(t?5:0),l-a.top+g.scrollTop-(t?5:0)];m=d,w=i,k.style.top=w+"px",k.style.left=m+"px",g.appendChild(k)};g.addEventListener("mousedown",y);const L=function(e){if(k){e.preventDefault();let t=h.classList.contains("feedbackplus-active");const s=g.getBoundingClientRect(),l=e.pageX-s.left+g.scrollLeft-(t?5:0),c=e.pageY-s.top+g.scrollTop-(t?5:0),o=l-m,a=c-w;o<0?(k.style.left=m+o+"px",k.style.width=m-l+"px"):(k.style.left=m+"px",k.style.width=o+"px"),a<0?(k.style.top=w+a+"px",k.style.height=w-c+"px"):(k.style.top=w+"px",k.style.height=a+"px")}};g.addEventListener("mousemove",L);const x=function(e){k&&(k.querySelector(".feedbackplus.feedbackplus-tool-close").style.removeProperty("display"),k.offsetHeight<30&&k.offsetWidth<30&&k.remove(),k=null)};document.body.addEventListener("mouseup",x);const E=function(e){e.target.closest(".feedbackplus-tool-close")&&(e.stopPropagation(),e.target.closest(".feedbackplus-highlight")?.remove(),e.target.closest(".feedbackplus-hide")?.remove())};g.addEventListener("mousedown",E,!0);const M=()=>{const e=g.querySelectorAll(".feedbackplus.feedbackplus-edit"),s=u.getContext("2d");s.lineWidth=5,s.strokeStyle="#FCC934",s.fillStyle="black",e.forEach((e=>{let{top:t,left:l,width:c,height:o}=e.style;t=+t.slice(0,-2),l=+l.slice(0,-2),c=+c.slice(0,-2),o=+o.slice(0,-2),e.classList.contains("feedbackplus-highlight")?s.strokeRect(l+2.5,t+2.5,c+5,o+5):e.classList.contains("feedbackplus-hide")&&s.fillRect(l,t,c,o)})),a(),this.clearEdits(),t(u)},H=d.querySelector(".feedbackplus.feedbackplus-complete");H.addEventListener("click",M);const z=d.querySelector(".feedbackplus.feedbackplus-cancel"),S=d.querySelector(".feedbackplus.feedbackplus-close"),V=()=>{a(),this.clearEdits(),s()};z.addEventListener("click",V),S.addEventListener("click",V);const C=e=>{if(e.ctrlKey&&26==e.keyCode){const e=g.querySelectorAll(".feedbackplus.feedbackplus-edit"),t=e[e.length-1];t&&t.remove()}};document.body.addEventListener("keypress",C),document.body.appendChild(d),document.body.appendChild(i),f.style.display=o?"inherit":"none",h.style.display=c?"inherit":"none";const q=d.querySelectorAll(".feedbackplus.feedbackplus-tool");q.forEach((e=>e.classList.remove("feedbackplus-active")));for(const e of q)if("none"!=window.getComputedStyle(e).display){e.classList.add("feedbackplus-active");break}}closeEditDialog(){const{modal:e,backdrop:t}=this;e.remove(),t.remove()}clearEdits(){const{modal:e,backdrop:t}=this;e.querySelector(".feedbackplus.feedbackplus-canvas-container").querySelectorAll(".feedbackplus.feedbackplus-edit").forEach((e=>e.remove()))}static canvasToBitmap(e){return new Promise(((t,s)=>{const l=e.getContext("2d").getImageData(0,0,e.width,e.height);createImageBitmap(l).then((e=>{t({bitmap:e,width:e.width,height:e.height})}))}))}}return"undefined"!=typeof module&&(module.exports={FeedbackPlus:e}),e}));
//# sourceMappingURL=/sm/0e82aa95cca50820f82da311a6d22f63424dccf2a31317e95ebb110ed65ff2eb.map
